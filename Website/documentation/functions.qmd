---
format:
  html:
    include-in-header:
      text: |
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
---

<div style="text-align: center;" id="functions">
  <h1>Functions <i class="fas fa-book-open"></i></h1>
</div>

## Method: `precompute_route`

<p class = "text"> Precompute the shortest route for a single trip. </p>

<p class = "text"> Given a row containing the coordinates of departure and return points, this method calculates the shortest path using the OpenStreetMap graph. </p>

### Parameters

<ul class = "text">
  <li> **`row`** (pandas.Series): a row from the input DataFrame containing trip information. The row must include the following columns: </li> 
  <ul class = "text">
    <li> `'Departure_latitude'`, `'Departure_longitude'` </li>
    <li> `'Return_latitude'`, `'Return_longitude'` </li>
  </ul>
</ul>

### Returns

<ul class = "text"> 
  <li> **list of int or None**: a list of node IDs representing the shortest path in the graph, or `None` if the route cannot be computed. </li>
</ul>

### Examples

<p class = "text"> Example: Precompute the shortest route for a single trip. </p>

```python
import pandas as pd

row = pd.Series({
    "Departure_latitude": 43.608,
    "Departure_longitude": 3.879,
    "Return_latitude": 43.610,
    "Return_longitude": 3.881
})

animation.precompute_route(row)
# Output: [123456, 123457, 123458, ...]
```

## Method: `create_animation`

<p class = "text"> Generate a video animation of the bike trips. </p>

<p class = "text"> This method processes all frames in parallel, saving intermediate images to the disk, and combines them into a video file. </p>

### Returns

<ul class = "text">
  <li> **None**: this method does not return any value. </li>
</ul>

### Notes

<ul class = "text">
 <li> This method uses **multiprocessing** to parallelize frame generation, which can be resource-intensive. </li>
 <li> Ensure that you have sufficient disk space for temporary files generated during the process. </li>
</ul>

### Examples

<p class = "text"> Example: Generate the animation for the loaded dataset. </p>

```python
animation = BikeAnimation(input_file="data/trips.csv")
animation.create_animation()
```